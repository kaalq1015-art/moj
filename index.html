<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ØªØ£Ø´ÙŠØ± Ø§Ù„Ø°ÙƒÙŠ 2.0</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --bg: #f1f5f9;
            --card-bg: #ffffff;
            --text-main: #1e293b;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        
        body { background-color: var(--bg); color: var(--text-main); line-height: 1.6; padding: 20px; }

        .app-container { max-width: 1000px; margin: 0 auto; background: var(--card-bg); border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); overflow: hidden; }

        /* Header */
        .app-header { background: var(--primary-dark); color: white; padding: 25px; text-align: center; border-bottom: 4px solid var(--warning); }
        .app-header h1 { font-size: 24px; font-weight: 700; letter-spacing: 0.5px; }
        .app-header p { font-size: 14px; opacity: 0.8; margin-top: 5px; }

        .main-layout { display: grid; grid-template-columns: 1fr 1.2fr; gap: 2px; background: var(--border); }
        @media (max-width: 850px) { .main-layout { grid-template-columns: 1fr; } }

        /* Sections */
        .section { background: var(--card-bg); padding: 25px; }
        .section-title { display: flex; align-items: center; gap: 10px; font-size: 18px; font-weight: 600; color: var(--primary-dark); margin-bottom: 20px; border-bottom: 2px solid var(--bg); padding-bottom: 10px; }

        /* Checklist Style */
        .check-item { display: flex; align-items: flex-start; gap: 12px; background: var(--bg); padding: 12px; border-radius: 8px; margin-bottom: 10px; cursor: pointer; transition: 0.2s; border: 1px solid transparent; }
        .check-item:hover { border-color: var(--primary); }
        .check-item input { width: 18px; height: 18px; cursor: pointer; margin-top: 3px; }
        .check-item label { font-size: 13px; cursor: pointer; flex: 1; color: var(--text-main); }
        .important-tag { font-size: 11px; color: var(--danger); font-weight: bold; display: block; margin-top: 4px; }

        /* Progress Bar */
        .progress-container { margin: 15px 0; background: #eee; border-radius: 10px; height: 8px; overflow: hidden; }
        .progress-bar { height: 100%; background: var(--success); width: 0%; transition: 0.4s; }

        /* Form Controls */
        .grid-form { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .form-group { margin-bottom: 15px; }
        .form-group.full { grid-column: span 2; }
        label { display: block; font-size: 13px; font-weight: 600; margin-bottom: 6px; color: var(--text-muted); }
        input, select { width: 100%; padding: 10px; border: 1.5px solid var(--border); border-radius: 8px; font-size: 14px; transition: 0.3s; }
        input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(37,99,235,0.1); }

        /* Date Group */
        .date-input-group { display: flex; gap: 5px; }
        .date-input-group input { text-align: center; padding: 8px 4px; }

        /* Preview Area */
        .preview-card { background: #f8fafc; border: 1px dashed var(--primary); padding: 15px; border-radius: 10px; margin-top: 20px; }
        .preview-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .char-tag { font-size: 12px; padding: 4px 10px; border-radius: 20px; font-weight: bold; }
        .char-good { background: #dcfce7; color: #166534; }
        .char-warn { background: #fef9c3; color: #854d0e; }
        .char-bad { background: #fee2e2; color: #991b1b; }

        /* Action Buttons */
        .btn-generate { width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 20px; transition: 0.3s; }
        .btn-generate:hover { background: var(--primary-dark); transform: translateY(-1px); }
        .btn-generate:disabled { background: #cbd5e1; cursor: not-allowed; }

        /* Results */
        .results-area { padding: 25px; display: none; background: #fff; border-top: 1px solid var(--border); }
        .result-item { position: relative; background: var(--bg); padding: 20px; border-radius: 12px; margin-bottom: 15px; border-right: 5px solid var(--primary); }
        .result-item h4 { font-size: 14px; color: var(--primary-dark); margin-bottom: 8px; }
        .result-content { font-size: 15px; color: var(--text-main); line-height: 1.8; }
        .copy-btn { position: absolute; left: 15px; top: 15px; padding: 6px 12px; font-size: 12px; background: white; border: 1px solid var(--border); border-radius: 6px; cursor: pointer; }
        .copy-btn:hover { background: var(--primary); color: white; }

        .highlight { font-weight: 700; color: var(--primary-dark); text-decoration: underline; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="app-header">
        <h1>Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ØªØ£Ø´ÙŠØ± Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h1>
        <p>Ù†Ø¸Ø§Ù… ØµÙŠØ§ØºØ© Ù†ØµÙˆØµ Ø§Ù„ØªØ£Ø´ÙŠØ± Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠ ÙˆÙÙ‚ Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©</p>
    </div>

    <div class="main-layout">
        <div class="section">
            <div class="section-title">ğŸ›¡ï¸ ØªØ¯Ù‚ÙŠÙ‚ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª</div>
            <div class="progress-container">
                <div id="progressBar" class="progress-bar"></div>
            </div>
            
            <div id="checklist">
                <div class="check-item">
                    <input type="checkbox" id="v1" onchange="logic.updateUI()">
                    <label for="v1">ÙØ­Øµ Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª (Ø£Ø¹Ù„Ù‰ Ø§Ù„ØªØ°ÙƒØ±Ø© ÙŠÙ…ÙŠÙ†Ø§Ù‹)</label>
                </div>
                <div class="check-item">
                    <input type="checkbox" id="v2" onchange="logic.updateUI()">
                    <label for="v2">Ø¸Ù‡ÙˆØ± Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¯Ø¹ÙˆÙ‰ (Ù†Ø§Ø¬Ø²/Ø¶Ø¨Ø· Ø§Ù„Ø¬Ù„Ø³Ø©)</label>
                </div>
                <div class="check-item">
                    <input type="checkbox" id="v3" onchange="logic.updateUI()">
                    <label for="v3">Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ø·Ø±Ø§Ù Ø§Ù„Ø¯Ø¹ÙˆÙ‰ ÙˆØ¨ÙŠØ§Ù†Ø§ØªÙ‡Ø§</label>
                </div>
                <div class="check-item">
                    <input type="checkbox" id="v4" onchange="logic.updateUI()">
                    <label for="v4">Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ø¥Ù‚Ø±Ø§Ø± Ù„Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</label>
                </div>
                <div class="check-item">
                    <input type="checkbox" id="v5" onchange="logic.updateUI()">
                    <label for="v5">Ø§Ù„Ø¯Ø¹ÙˆÙ‰ "Ù‚Ø§Ø¦Ù…Ø©" ÙˆÙ„Ù… ÙŠÙƒØªØ³Ø¨ Ø§Ù„Ø­ÙƒÙ… Ø§Ù„Ù‚Ø·Ø¹ÙŠØ©</label>
                </div>
                <div class="check-item">
                    <input type="checkbox" id="v6" onchange="logic.updateUI()">
                    <label for="v6">ØµÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ ÙˆØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙˆÙƒØ§Ù„Ø© (Ø¥Ù‚Ø±Ø§Ø±/ØªØ£Ø´ÙŠØ±)</label>
                </div>
                <div class="check-item">
                    <input type="checkbox" id="v7" onchange="logic.updateUI()">
                    <label for="v7">Ø§Ù„Ø¯Ø¹ÙˆÙ‰ Ø¶Ø¯ Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø£Ùˆ ÙˆØ±Ø«ØªÙ‡</label>
                </div>
                <div class="check-item">
                    <input type="checkbox" id="v8" onchange="logic.updateUI()">
                    <label for="v8">ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø­ÙˆÙƒÙ…Ø© (Ù„Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø© Ù„Ù„Ø­Ø¬ÙŠØ©)
                        <span class="important-tag">Ø¥Ù„Ø²Ø§Ù…ÙŠ Ù„Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø­ØµÙ†Ø©</span>
                    </label>
                </div>
            </div>
        </div>

        <div class="section" style="border-right: 1px solid var(--border);">
            <div class="section-title">ğŸ“ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</div>
            
            <div class="grid-form">
                <div class="form-group">
                    <label>Ø±Ù‚Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±</label>
                    <input type="text" id="propNo" placeholder="7000..." oninput="logic.updateUI()">
                </div>
                <div class="form-group">
                    <label>Ø±Ù‚Ù… Ø§Ù„ØµÙƒ</label>
                    <input type="text" id="docNo" placeholder="9200..." oninput="logic.updateUI()">
                </div>
                <div class="form-group">
                    <label>Ø±Ù‚Ù… Ø§Ù„Ø¯Ø¹ÙˆÙ‰</label>
                    <input type="text" id="caseNo" placeholder="45..." oninput="logic.updateUI()">
                </div>
                <div class="form-group">
                    <label>Ù‡ÙˆÙŠØ© Ø§Ù„Ù…Ø¯Ø¹Ù‰ Ø¹Ù„ÙŠÙ‡</label>
                    <input type="text" id="defId" placeholder="10..." oninput="logic.updateUI()">
                </div>
                
                <div class="form-group full">
                    <label>ØªØ§Ø±ÙŠØ® Ù‚ÙŠØ¯ Ø§Ù„Ø¯Ø¹ÙˆÙ‰ (Ù‡Ø¬Ø±ÙŠ)</label>
                    <div class="date-input-group">
                        <input type="number" id="rd" placeholder="ÙŠÙˆÙ…" min="1" max="30" oninput="logic.updateUI()">
                        <input type="number" id="rm" placeholder="Ø´Ù‡Ø±" min="1" max="12" oninput="logic.updateUI()">
                        <input type="number" id="ry" placeholder="Ø³Ù†Ø©" min="1400" max="1500" oninput="logic.updateUI()">
                    </div>
                </div>

                <div class="form-group">
                    <label>Ø±Ù‚Ù… Ø§Ù„ØªØ°ÙƒØ±Ø©</label>
                    <input type="text" id="tickNo" placeholder="400..." oninput="logic.updateUI()">
                </div>
                <div class="form-group">
                    <label>Ù†ÙˆØ¹ Ù…Ù‚Ø¯Ù… Ø§Ù„Ø·Ù„Ø¨</label>
                    <select id="appType" onchange="logic.toggleAgency()">
                        <option value="Ø£ØµÙŠÙ„">Ø£ØµÙŠÙ„ (ØµØ§Ø­Ø¨ Ø§Ù„Ø·Ù„Ø¨)</option>
                        <option value="ÙˆÙƒÙŠÙ„">ÙˆÙƒÙŠÙ„ Ø´Ø±Ø¹ÙŠ</option>
                    </select>
                </div>

                <div class="form-group full" id="agencyBox" style="display:none">
                    <label>Ø±Ù‚Ù… Ø§Ù„ÙˆÙƒØ§Ù„Ø©</label>
                    <input type="text" id="ageNo" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆÙƒØ§Ù„Ø© Ø§Ù„Ø´Ø±Ø¹ÙŠØ©" oninput="logic.updateUI()">
                </div>

                <div class="form-group full">
                    <label>Ø±Ù‚Ù… Ù‡ÙˆÙŠØ© Ù…Ù‚Ø¯Ù… Ø§Ù„Ø·Ù„Ø¨</label>
                    <input type="text" id="appId" oninput="logic.updateUI()">
                </div>

                <div class="form-group full">
                    <div class="date-input-group">
                        <div style="flex:1">
                            <label>ÙŠÙˆÙ… Ø§Ù„Ø±ÙØ¹</label>
                            <input type="number" id="sd" min="1" max="30" oninput="logic.updateUI()">
                        </div>
                        <div style="flex:1">
                            <label>Ø´Ù‡Ø± Ø§Ù„Ø±ÙØ¹</label>
                            <input type="number" id="sm" min="1" max="12" oninput="logic.updateUI()">
                        </div>
                        <div style="flex:1">
                            <label>Ø³Ù†Ø© Ø§Ù„Ø±ÙØ¹</label>
                            <input type="number" id="sy" min="1440" max="1500" oninput="logic.updateUI()">
                        </div>
                    </div>
                </div>
            </div>

            <div class="preview-card">
                <div class="preview-header">
                    <span style="font-size:12px; color:var(--primary); font-weight:bold;">Ù…Ø¹Ø§ÙŠÙ†Ø© Ø­ÙŠØ© Ù„Ù„Ù†Øµ Ø§Ù„Ø£ÙˆÙ„:</span>
                    <span id="charCounter" class="char-tag char-good">0 / 250</span>
                </div>
                <div id="livePreview" class="result-content" style="font-size: 13px; opacity: 0.7;">
                    Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...
                </div>
            </div>

            <button id="genBtn" class="btn-generate" onclick="logic.generate()" disabled>Ø¥Ù†Ø´Ø§Ø¡ Ù†ØµÙˆØµ Ø§Ù„ØªØ£Ø´ÙŠØ± Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©</button>
        </div>
    </div>

    <div id="resultsArea" class="results-area">
        <div class="result-item">
            <button class="copy-btn" onclick="logic.copy('res1')">Ù†Ø³Ø® Ø§Ù„Ù†Øµ</button>
            <h4>Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø®ØªØµØ± (Ø£Ù‚Ù„ Ù…Ù† 250 Ø­Ø±Ù)</h4>
            <div id="res1" class="result-content"></div>
        </div>
        <div class="result-item">
            <button class="copy-btn" onclick="logic.copy('res2')">Ù†Ø³Ø® Ø§Ù„Ù†Øµ</button>
            <h4>Ø§Ù„Ù†Øµ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ (Ù„Ù„Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠ)</h4>
            <div id="res2" class="result-content"></div>
        </div>
    </div>
</div>

<script>
    const logic = {
        toggleAgency() {
            const isAgent = document.getElementById('appType').value === 'ÙˆÙƒÙŠÙ„';
            document.getElementById('agencyBox').style.display = isAgent ? 'block' : 'none';
            this.updateUI();
        },

        getFields() {
            return {
                prop: document.getElementById('propNo').value || '...',
                doc: document.getElementById('docNo').value || '...',
                case: document.getElementById('caseNo').value || '...',
                def: document.getElementById('defId').value || '...',
                rd: document.getElementById('rd').value || '..',
                rm: document.getElementById('rm').value || '..',
                ry: document.getElementById('ry').value || '....',
                tick: document.getElementById('tickNo').value || '...',
                sd: document.getElementById('sd').value || '..',
                sm: document.getElementById('sm').value || '..',
                sy: document.getElementById('sy').value || '....',
                type: document.getElementById('appType').value,
                appId: document.getElementById('appId').value || '...',
                age: document.getElementById('ageNo').value || '...'
            };
        },

        buildText(isShort) {
            const f = this.getFields();
            const dateReg = `${f.rd}-${f.rm}-${f.ry}`;
            const dateSub = `${f.sd}-${f.sm}-${f.sy}`;
            const applicant = f.type === 'ÙˆÙƒÙŠÙ„' ? `Ø§Ù„ÙˆÙƒÙŠÙ„: ${f.appId} ÙˆÙƒØ§Ù„Ø©: ${f.age}` : `${f.appId}`;
            
            let base = `ØªÙ… Ø§Ù„ØªØ£Ø´ÙŠØ± Ø¨Ø§Ù„Ø¯Ø¹ÙˆÙ‰ Ø±Ù‚Ù… ${f.case} `;
            if (!isShort) base += `Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù‚Ø§Ø± Ø±Ù‚Ù… ${f.prop} ÙˆØ§Ù„ØµÙƒ Ø±Ù‚Ù… ${f.doc} `;
            
            base += `Ø¨Ø±Ù‚Ù… Ù‡ÙˆÙŠØ© Ø§Ù„Ù…Ø¯Ø¹Ù‰ Ø¹Ù„ÙŠÙ‡ ${f.def} Ø§Ù„Ù…Ù‚ÙŠØ¯Ø© Ø¨ØªØ§Ø±ÙŠØ® ${dateReg} Ø¨Ù…ÙˆØ¬Ø¨ Ø¥Ù‚Ø±Ø§Ø± Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ ÙÙŠ Ø§Ù„ØªØ°ÙƒØ±Ø© Ø±Ù‚Ù… ${f.tick} Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø© Ø¨ØªØ§Ø±ÙŠØ® ${dateSub}. Ø¨Ù…ÙˆØ¬Ø¨ Ø·Ù„Ø¨ ${applicant}.`;
            return base;
        },

        updateUI() {
            // Update Progress Bar
            const checks = document.querySelectorAll('#checklist input[type="checkbox"]');
            const checked = Array.from(checks).filter(c => f.checked).length; // error fix below
            let count = 0; checks.forEach(c => { if(c.checked) count++; });
            const percent = (count / checks.length) * 100;
            document.getElementById('progressBar').style.width = percent + '%';

            // Preview
            const text1 = this.buildText(true);
            const previewEl = document.getElementById('livePreview');
            previewEl.innerText = text1;
            
            // Char Counter
            const counter = document.getElementById('charCounter');
            const len = text1.length;
            counter.innerText = `${len} / 250`;
            
            if(len > 250) {
                counter.className = 'char-tag char-bad';
            } else if(len > 210) {
                counter.className = 'char-tag char-warn';
            } else {
                counter.className = 'char-tag char-good';
            }

            // Enable Button
            const btn = document.getElementById('genBtn');
            const allChecked = count === checks.length;
            const hasData = document.getElementById('caseNo').value && document.getElementById('appId').value;
            btn.disabled = !(allChecked && hasData);
        },

        generate() {
            const t1 = this.buildText(true);
            const t2 = this.buildText(false);

            if(t1.length > 250) {
                alert('âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: Ø§Ù„Ù†Øµ Ø§Ù„Ø£ÙˆÙ„ ÙŠØªØ¬Ø§ÙˆØ² 250 Ø­Ø±ÙØŒ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªØµØ§Ø± Ø¨Ø¹Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.');
                return;
            }

            document.getElementById('res1').innerText = t1;
            document.getElementById('res2').innerText = t2;
            document.getElementById('resultsArea').style.display = 'block';
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        },

        copy(id) {
            const text = document.getElementById(id).innerText;
            navigator.clipboard.writeText(text).then(() => {
                const btn = event.target;
                const original = btn.innerText;
                btn.innerText = 'âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø®';
                btn.style.background = '#10b981';
                btn.style.color = 'white';
                setTimeout(() => { 
                    btn.innerText = original;
                    btn.style.background = 'white';
                    btn.style.color = 'black';
                }, 1500);
            });
        }
    };
</script>

</body>
</html>
